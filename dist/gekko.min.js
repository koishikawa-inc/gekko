(function(i,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.Gekko={}))})(this,function(i){"use strict";var P=Object.defineProperty;var G=(i,n,r)=>n in i?P(i,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[n]=r;var m=(i,n,r)=>(G(i,typeof n!="symbol"?n+"":n,r),r);const n=Math.pow,r=Math.sqrt,c=Math.sin,E=Math.cos,l=Math.PI,f=1.70158,d=f*1.525,v=f+1,k=2*l/3,O=2*l/4.5;function h(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}const Q={inQuad:function(t){return t*t},outQuad:function(t){return 1-(1-t)*(1-t)},inOutQuad:function(t){return t<.5?2*t*t:1-n(-2*t+2,2)/2},inCubic:function(t){return t*t*t},outCubic:function(t){return 1-n(1-t,3)},inOutCubic:function(t){return t<.5?4*t*t*t:1-n(-2*t+2,3)/2},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1-n(1-t,4)},inOutQuart:function(t){return t<.5?8*t*t*t*t:1-n(-2*t+2,4)/2},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return 1-n(1-t,5)},inOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-n(-2*t+2,5)/2},inSine:function(t){return 1-E(t*l/2)},outSine:function(t){return c(t*l/2)},inOutSine:function(t){return-(E(l*t)-1)/2},inExpo:function(t){return t===0?0:n(2,10*t-10)},outExpo:function(t){return t===1?1:1-n(2,-10*t)},inOutExpo:function(t){return t===0?0:t===1?1:t<.5?n(2,20*t-10)/2:(2-n(2,-20*t+10))/2},inCirc:function(t){return 1-r(1-n(t,2))},outCirc:function(t){return r(1-n(t-1,2))},inOutCirc:function(t){return t<.5?(1-r(1-n(2*t,2)))/2:(r(1-n(-2*t+2,2))+1)/2},inElastic:function(t){return t===0?0:t===1?1:-n(2,10*t-10)*c((t*10-10.75)*k)},outElastic:function(t){return t===0?0:t===1?1:n(2,-10*t)*c((t*10-.75)*k)+1},inOutElastic:function(t){return t===0?0:t===1?1:t<.5?-(n(2,20*t-10)*c((20*t-11.125)*O))/2:n(2,-20*t+10)*c((20*t-11.125)*O)/2+1},inBack:function(t){return v*t*t*t-f*t*t},outBack:function(t){return 1+v*n(t-1,3)+f*n(t-1,2)},inOutBack:function(t){return t<.5?n(2*t,2)*((d+1)*2*t-d)/2:(n(2*t-2,2)*((d+1)*(t*2-2)+d)+2)/2},inBounce:function(t){return 1-h(1-t)},outBounce:h,inOutBounce:function(t){return t<.5?(1-h(1-2*t))/2:(1+h(2*t-1))/2},linear:function(t){return t}},C=(...t)=>{console.error("Gekko",...t)},B={speed:1e3,isSpeedAsDuration:!1,delay:0,easing:"outQuad",offset:0};class M{constructor(e){m(this,"params");m(this,"isStop",!1);m(this,"isScrolling",!1);this.params={...B,...e},document.querySelectorAll("a").forEach(s=>{s.target||s.addEventListener("click",u=>{this.onClick(u)})}),window.location.hash&&document.addEventListener("DOMContentLoaded",()=>{this.scroll(window.location.hash)});const o="onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll";document.addEventListener(o,()=>{this.onScroll()}),document.addEventListener("touchstart",()=>{this.onScroll()})}scroll(e,o=!0){var u;const s=document.getElementById(e.replace("#",""));if(s){this.isStop=!1;const w=window.pageYOffset||document.documentElement.scrollTop,T=s.getBoundingClientRect().top+w;let a;typeof this.params.offset=="number"?a=this.params.offset:typeof this.params.offset=="string"?a=((u=document.querySelector(this.params.offset))==null?void 0:u.getBoundingClientRect().height)||0:typeof this.params.offset=="function"?a=this.params.offset():a=0;const S=Math.max(0,T-a),g=S-w;if(g===0)return;if(history.pushState({},"",e),document.dispatchEvent(new CustomEvent("beforeScroll",{detail:{anchor:e}})),o){this.isScrolling=!0;const q=this.params.isSpeedAsDuration?this.params.speed:Math.abs(g/this.params.speed)*1e3,D=performance.now(),y=A=>{const b=(A-D)/q;b<1&&!this.isStop?(window.scrollTo(0,w+g*Q[this.params.easing](b)),window.requestAnimationFrame(y)):this.isStop?(this.isScrolling=!1,document.dispatchEvent(new CustomEvent("stopScroll",{detail:{anchor:e}}))):(window.scrollTo(0,S),this.isScrolling=!1,document.dispatchEvent(new CustomEvent("afterScroll",{detail:{anchor:e}})))};window.requestAnimationFrame(y)}else window.scrollTo(0,S)}else C("id is not found")}stop(){this.isStop=!0}on(e,o){const s=u=>{o(u.detail.anchor)};document.addEventListener(e,s)}options(e){this.params={...this.params,...e}}destroy(){document.querySelectorAll("a").forEach(o=>{o.removeEventListener("click",this.onClick)});const e="onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll";document.removeEventListener(e,this.onScroll),document.removeEventListener("touchstart",this.onScroll)}onClick(e){e.preventDefault(),e.stopPropagation();const o=e.currentTarget;if(!o){C("no elm");return}const s=`${o.protocol}//${o.host}${o.pathname}`===location.origin+location.pathname?o.hash:"";s&&o.dataset.gekko!=="no-smooth"?this.scroll(s):s&&o.dataset.gekko==="no-smooth"?this.scroll(s,!1):window.location.href=o.href}onScroll(){this.isScrolling&&this.stop()}}let p;const L=t=>(p||(p=new M(t)),p);i.default=M,i.gk=L,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
